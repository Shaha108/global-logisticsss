<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Galactic Delivery</title>
  <style>
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      background: black;
      color: white;
      overflow: hidden;
    }
    #gameCanvas {
      position: absolute;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 1;
    }
    #ui {
      position: absolute;
      top: 10px; left: 10px;
      z-index: 2;
      background: rgba(0,0,50,0.7);
      padding: 10px;
      border-radius: 10px;
    }
    button {
      margin-top: 5px;
      padding: 5px 10px;
      font-weight: bold;
    }
    #footer {
      position: absolute;
      bottom: 10px;
      width: 100%;
      text-align: center;
      color: #888;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas"></canvas>

  <div id="ui">
    <h3>Galactic Delivery</h3>
    <button onclick="startRoute()">Start Route</button>
    <button onclick="clearRoute()">Clear Route</button>
    <button onclick="showInstructions()">How to Play</button>
    <p id="routeInfo">Route: None</p>
  </div>

  <div id="footer">Created by Shakhzodbek and Jakhongir</div>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const stars = [
      { name: 'HQ', x: 100, y: 100, color: 'red', isHub: true },
      { name: 'A', x: 300, y: 200, color: 'blue' },
      { name: 'B', x: 500, y: 150, color: 'blue' },
      { name: 'C', x: 700, y: 300, color: 'blue' },
      { name: 'D', x: 400, y: 400, color: 'blue' },
      { name: 'E', x: 200, y: 350, color: 'blue' },
    ];

    let route = [];

    function drawStars() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      for (let star of stars) {
        ctx.beginPath();
        ctx.arc(star.x, star.y, 20, 0, 2 * Math.PI);
        ctx.fillStyle = star.color;
        ctx.fill();
        ctx.fillStyle = 'white';
        ctx.fillText(star.name, star.x - 5, star.y + 5);
      }

      ctx.strokeStyle = 'lime';
      ctx.lineWidth = 2;
      ctx.beginPath();
      for (let i = 0; i < route.length; i++) {
        const star = route[i];
        if (i === 0) {
          ctx.moveTo(star.x, star.y);
        } else {
          ctx.lineTo(star.x, star.y);
        }
      }
      ctx.stroke();
    }

    canvas.addEventListener('click', (e) => {
      const x = e.clientX;
      const y = e.clientY;
      for (let star of stars) {
        const dx = x - star.x;
        const dy = y - star.y;
        if (dx * dx + dy * dy < 400) {
          route.push(star);
          updateRouteDisplay();
          drawStars();
          break;
        }
      }
    });

    function updateRouteDisplay() {
      const names = route.map(star => star.name).join(" â†’ ");
      document.getElementById("routeInfo").textContent = "Route: " + (names || "None");
    }

    function clearRoute() {
      route = [];
      updateRouteDisplay();
      drawStars();
    }

    function startRoute() {
      if (route.length < 2 || !route[0].isHub || !route[route.length - 1].isHub) {
        alert("Route must start and end at the red hub (HQ).");
        return;
      }
      alert("Route executed! Distance: " + calculateDistance().toFixed(1) + " units");
    }

    function calculateDistance() {
      let dist = 0;
      for (let i = 1; i < route.length; i++) {
        const dx = route[i].x - route[i - 1].x;
        const dy = route[i].y - route[i - 1].y;
        dist += Math.sqrt(dx * dx + dy * dy) / 10;
      }
      return dist;
    }

    function showInstructions() {
      alert(`HOW TO PLAY GALACTIC DELIVERY

Welcome, pilot! Your mission is to deliver cargo to various systems in the galaxy.

1. Click stars to plan your delivery route.
2. Start and end the route at the red HQ hub.
3. Press 'Start Route' to execute.
4. 'Clear Route' resets your path.
5. Aim to use the shortest distance!

Good luck, courier!`);
    }

    drawStars();
  </script>
</body>
</html>
